contract B

contract A

// contract A

constructor
interface constructor(uint z)

iff
   CALLVALUE == 0
   inRange(uint256, z + 1)

creates
   uint x := z + 1


transition x
interface x()

iff
   CALLVALUE == 0

returns
   pre(x)

transition add_x
interface add_x(uint y)

iff
   CALLVALUE == 0
   inRange(uint256, x + y)

storage

  x := x + y


// contract B
constructor
interface constructor(uint i)
iff
   CALLVALUE == 0
   inRange(uint256, i + 42)

creates
   uint z := i + 42
   A a := create A(i)

transition incr_z
interface incr_z()

iff
   CALLVALUE == 0
   inRange(uint256, z + 1)

storage

  z := z + 1

transition a_add_x
interface a_add_x(uint y)

iff
   CALLVALUE == 0
   inRange(uint256, a.x + y)

storage

  a.x := a.x + y


// contract C

contract C

constructor
interface constructor(uint u)

iff
   CALLVALUE == 0
   inRange(uint256, u + 1)
   inRange(uint256, u + 42)

creates
   uint y := 0
   A a := create A(u)
   B b := create B(u)


transition remote
interface remote(uint z)

iff
   CALLVALUE == 0
   inRange(uint256, b.z + 1)
   inRange(uint256, b.a.x + z)

storage

  b.z := b.z + 1
  b.a.x := b.a.x + z

returns z